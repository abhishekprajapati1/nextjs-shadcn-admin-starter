current_branch=$(git branch --show-current)

echo "Do you want to remove the .next directory? (Y/N)"
read -r answer

if [ "$answer" = "Y" ] || [ "$answer" = "y" ]; then
    echo "Removing .next directory..."
    rm -rf .next
    echo "Removed existing .next"
else
    echo "Skipping .next removal"
fi

echo "üîç Testing build before pushing..."
if pnpm run build; then
    echo "‚úÖ Build successful - pushing changes to origin/$current_branch..."
    exit 0
else
    echo "‚ò†Ô∏è Build failed - please fix errors before pushing"
    exit 1
fi