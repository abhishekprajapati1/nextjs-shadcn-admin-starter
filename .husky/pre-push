current_branch=$(git branch --show-current)
if sudo rm -rf .next; then
    echo "Removed existing .next"
    echo "üîç Testing build before pushing..."
    if pnpm run build; then
        echo "‚úÖ Build successful - pushing changes to origin/$current_branch..."
        exit 0
    else
        echo "‚ò†Ô∏è Build failed - please fix errors before pushing"
        exit 1
    fi
    exit 0
else
    echo "Removal of .next failed cannot proceed further"
    exit 1
fi
